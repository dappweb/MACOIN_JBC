# JBC ä»£å¸ç”Ÿæˆæœºåˆ¶åˆ†æ

## æ¦‚è¿°

æœ¬æ–‡æ¡£è¯¦ç»†åˆ†æäº† JBC (Jinbao Coin) ä»£å¸çš„ç”Ÿæˆã€åˆ†é…å’Œæµé€šæœºåˆ¶ã€‚

## 1. JBC ä»£å¸çš„åˆå§‹ç”Ÿæˆ

### 1.1 åˆçº¦éƒ¨ç½²æ—¶çš„åˆå§‹é“¸é€ 

åœ¨ `contracts/JBC.sol` ä¸­ï¼ŒJBC ä»£å¸åœ¨åˆçº¦éƒ¨ç½²æ—¶è¿›è¡Œä¸€æ¬¡æ€§åˆå§‹é“¸é€ ï¼š

```solidity
constructor(address initialOwner) ERC20("Jinbao Coin", "JBC") Ownable(initialOwner) {
    // Initial mint: 100 million
    // 5 million to LP (should be handled by deployer/protocol)
    // 95 million to Protocol for Mining
    _mint(msg.sender, 100_000_000 * 10**decimals());
}
```

**å…³é”®ç‚¹ï¼š**
- åˆå§‹æ€»ä¾›åº”é‡ï¼š**100,000,000 JBC** (1äº¿æš)
- å…¨éƒ¨é“¸é€ ç»™éƒ¨ç½²è€… (`msg.sender`)
- è®¡åˆ’åˆ†é…ï¼š
  - 5,000,000 JBC â†’ æµåŠ¨æ€§æ±  (LP)
  - 95,000,000 JBC â†’ åè®®åˆçº¦ç”¨äºæŒ–çŸ¿å¥–åŠ±

### 1.2 å½“å‰åˆçº¦çš„é™åˆ¶

**é‡è¦å‘ç°ï¼š** å½“å‰çš„ `JBC.sol` åˆçº¦**æ²¡æœ‰åŠ¨æ€é“¸é€ åŠŸèƒ½**ï¼š
- æ²¡æœ‰ `mint()` å‡½æ•°ä¾›å¤–éƒ¨è°ƒç”¨
- æ²¡æœ‰ `setMinter()` å‡½æ•°è®¾ç½®é“¸é€ æƒé™
- åªæœ‰æ„é€ å‡½æ•°ä¸­çš„ä¸€æ¬¡æ€§åˆå§‹é“¸é€ 

è¿™æ„å‘³ç€ï¼š
- âœ… JBC æ€»ä¾›åº”é‡å›ºå®šä¸º 1 äº¿æšï¼ˆé™¤éæœ‰é”€æ¯ï¼‰
- âŒ æ— æ³•é€šè¿‡åè®®åˆçº¦åŠ¨æ€é“¸é€ æ–°çš„ JBC
- âš ï¸ åè®®åˆçº¦å¿…é¡»é¢„å…ˆæŒæœ‰ JBC æ‰èƒ½åˆ†é…ç»™ç”¨æˆ·

## 2. JBC çš„åˆ†é…æœºåˆ¶

### 2.1 å¥–åŠ±åˆ†é…æ–¹å¼

åœ¨åè®®åˆçº¦ä¸­ï¼Œç”¨æˆ·å¥–åŠ±é‡‡ç”¨ **50% MC + 50% JBC** çš„åˆ†é…æœºåˆ¶ï¼š

#### é™æ€å¥–åŠ± (Static Rewards)
```solidity
// contracts/JinbaoProtocolNative.sol:1375-1390
uint256 mcPart = totalYield / 2;
uint256 jbcValuePart = totalYield / 2;

uint256 jbcPrice = swapReserveJBC == 0 || swapReserveMC < MIN_LIQUIDITY 
    ? 1 ether 
    : (swapReserveMC * 1e18) / swapReserveJBC;
uint256 jbcAmount = (jbcValuePart * 1 ether) / jbcPrice;

if (jbcToken.balanceOf(address(this)) >= jbcAmount && jbcAmount > 0) {
    jbcToken.transfer(msg.sender, jbcAmount);
}
```

#### çº§å·®å¥–åŠ± (Differential Rewards)
```solidity
// contracts/JinbaoProtocolNative.sol:824-867
function _distributeDifferentialReward(address user, uint256 amount, uint8 rType) 
    internal returns (uint256) {
    // 50/50 åˆ†é…
    uint256 mcPart = amount / 2;
    uint256 jbcValuePart = amount / 2;
    
    // è®¡ç®— JBC ä»·æ ¼
    uint256 jbcPrice = _getCurrentJBCPrice();
    uint256 jbcAmount = (jbcValuePart * 1 ether) / jbcPrice;
    
    // è½¬è´¦ JBC
    jbcToken.transfer(user, jbcTransferred);
}
```

### 2.2 JBC ä»·æ ¼è®¡ç®—

JBC çš„ä»·æ ¼åŸºäºåè®®å†…éƒ¨çš„äº¤æ¢å‚¨å¤‡æ± è®¡ç®—ï¼š

```solidity
jbcPrice = (swapReserveMC * 1e18) / swapReserveJBC
```

- `swapReserveMC`: åè®®åˆçº¦ä¸­ MC çš„å‚¨å¤‡é‡
- `swapReserveJBC`: åè®®åˆçº¦ä¸­ JBC çš„å‚¨å¤‡é‡
- å¦‚æœå‚¨å¤‡ä¸è¶³ï¼Œé»˜è®¤ä»·æ ¼ä¸º `1 ether` (1 MC = 1 JBC)

### 2.3 åˆ†é…é™åˆ¶

åè®®åˆçº¦åœ¨åˆ†é… JBC æ—¶ä¼šæ£€æŸ¥ï¼š
1. **ä½™é¢æ£€æŸ¥**ï¼š`jbcToken.balanceOf(address(this)) >= jbcAmount`
2. **æµåŠ¨æ€§ä¿æŠ¤**ï¼šå¦‚æœ JBC åˆ†é…é‡è¶…è¿‡å‚¨å¤‡çš„ 5%ï¼Œä¼šè§¦å‘ä¿æŠ¤æœºåˆ¶
3. **éƒ¨åˆ†åˆ†é…**ï¼šå¦‚æœä½™é¢ä¸è¶³ï¼Œåªåˆ†é…å¯ç”¨çš„æ•°é‡

## 3. JBC çš„æµé€šæœºåˆ¶

### 3.1 äº¤æ¢æœºåˆ¶ (Swap)

ç”¨æˆ·å¯ä»¥é€šè¿‡åè®®åˆçº¦è¿›è¡Œ MC â†” JBC äº¤æ¢ï¼š

#### MC æ¢ JBC
```solidity
// contracts/JinbaoProtocolNative.sol:701-725
function swapMCToJBC() external payable {
    uint256 mcAmount = msg.value;
    uint256 jbcOutput = (mcAmount * swapReserveJBC) / (swapReserveMC + mcAmount);
    
    uint256 tax = (jbcOutput * swapBuyTax) / 100;
    uint256 amountToUser = jbcOutput - tax;
    
    swapReserveMC += mcAmount;
    swapReserveJBC -= jbcOutput;
    
    jbcToken.burn(tax);  // é”€æ¯ç¨æ”¶éƒ¨åˆ†
    jbcToken.transfer(msg.sender, amountToUser);
}
```

#### JBC æ¢ MC
```solidity
function swapJBCToMC(uint256 jbcAmount) external {
    // ç±»ä¼¼çš„åå‘äº¤æ¢é€»è¾‘
    // ä» swapReserveMC ä¸­æå– MC ç»™ç”¨æˆ·
}
```

### 3.2 ç¨æ”¶æœºåˆ¶

JBC ä»£å¸åœ¨äº¤æ˜“æ—¶ä¼šäº§ç”Ÿç¨æ”¶ï¼š

```solidity
// contracts/JBC.sol:17-19
uint256 public constant BUY_TAX = 50;  // 50%
uint256 public constant SELL_TAX = 25; // 25%
```

- **ä¹°å…¥ç¨**ï¼š50% â†’ é”€æ¯
- **å–å‡ºç¨**ï¼š25% â†’ é”€æ¯
- **åè®®åœ°å€è±å…**ï¼šåè®®åˆçº¦åœ°å€çš„äº¤æ˜“ä¸æ”¶å–ç¨æ”¶

### 3.3 é”€æ¯æœºåˆ¶

JBC å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼è¢«é”€æ¯ï¼š
1. **äº¤æ˜“ç¨æ”¶**ï¼šä¹°å…¥/å–å‡ºæ—¶çš„ç¨æ”¶ç›´æ¥å‘é€åˆ°é»‘æ´åœ°å€
2. **äº¤æ¢ç¨æ”¶**ï¼šMC æ¢ JBC æ—¶çš„ç¨æ”¶é€šè¿‡ `burn()` å‡½æ•°é”€æ¯
3. **åè®®é”€æ¯**ï¼šåè®®åˆçº¦å¯ä»¥è°ƒç”¨ `burn()` å‡½æ•°ï¼ˆå¦‚æ¯æ—¥é€šç¼©ï¼‰

## 4. å½“å‰å®ç°çš„é—®é¢˜ä¸é™åˆ¶

### 4.1 å…³é”®é—®é¢˜

1. **æ— åŠ¨æ€é“¸é€ èƒ½åŠ›**
   - å½“å‰ `JBC.sol` åˆçº¦æ— æ³•åŠ¨æ€é“¸é€ æ–°ä»£å¸
   - åè®®åˆçº¦å¿…é¡»é¢„å…ˆæŒæœ‰è¶³å¤Ÿçš„ JBC æ‰èƒ½æŒç»­åˆ†é…å¥–åŠ±
   - å¦‚æœåè®®åˆçº¦çš„ JBC ä½™é¢è€—å°½ï¼Œå°†æ— æ³•ç»§ç»­åˆ†é… JBC å¥–åŠ±

2. **JBCv2 åˆçº¦ç¼ºå¤±**
   - éƒ¨ç½²è„šæœ¬ `scripts/deploy-native-mc.cjs` å¼•ç”¨äº† `JBCv2` åˆçº¦
   - è„šæœ¬ä¸­è°ƒç”¨äº† `jbc.setMinter(protocolAddress)`
   - ä½†ä»£ç åº“ä¸­ä¸å­˜åœ¨ `JBCv2.sol` æ–‡ä»¶
   - è¿™å¯èƒ½å¯¼è‡´éƒ¨ç½²å¤±è´¥æˆ–éœ€è¦å¤–éƒ¨éƒ¨ç½² JBCv2

3. **ä¾›åº”é‡é™åˆ¶**
   - å›ºå®šä¾›åº”é‡å¯èƒ½å¯¼è‡´é•¿æœŸå¥–åŠ±åˆ†é…ä¸è¶³
   - éœ€è¦ç¡®ä¿åˆå§‹åˆ†é…çš„ 95,000,000 JBC è¶³å¤Ÿæ”¯æ’‘æ‰€æœ‰å¥–åŠ±

### 4.2 å»ºè®®çš„è§£å†³æ–¹æ¡ˆ

#### æ–¹æ¡ˆ 1: å®ç°å¯é“¸é€ çš„ JBCv2 åˆçº¦
```solidity
contract JBCv2 is ERC20, Ownable {
    address public minter;
    
    function setMinter(address _minter) external onlyOwner {
        minter = _minter;
    }
    
    function mint(address to, uint256 amount) external {
        require(msg.sender == minter, "Only minter can mint");
        _mint(to, amount);
    }
}
```

#### æ–¹æ¡ˆ 2: ç¡®ä¿åè®®åˆçº¦æœ‰è¶³å¤Ÿçš„ JBC å‚¨å¤‡
- åœ¨éƒ¨ç½²æ—¶ï¼Œå°† 95,000,000 JBC è½¬ç§»åˆ°åè®®åˆçº¦
- å®šæœŸç›‘æ§åè®®åˆçº¦çš„ JBC ä½™é¢
- å¦‚æœä½™é¢ä¸è¶³ï¼Œéœ€è¦æ‰‹åŠ¨è¡¥å……æˆ–è°ƒæ•´åˆ†é…æ¯”ä¾‹

#### æ–¹æ¡ˆ 3: è°ƒæ•´å¥–åŠ±åˆ†é…æœºåˆ¶
- å¦‚æœ JBC ä½™é¢ä¸è¶³ï¼Œå¯ä»¥ä¸´æ—¶è°ƒæ•´ä¸º 100% MC åˆ†é…
- æˆ–è€…æ ¹æ®å¯ç”¨ä½™é¢åŠ¨æ€è°ƒæ•´ MC/JBC åˆ†é…æ¯”ä¾‹

## 5. JBC ç”Ÿæˆæµç¨‹å›¾

```
éƒ¨ç½² JBC åˆçº¦
    â†“
åˆå§‹é“¸é€  100,000,000 JBC â†’ éƒ¨ç½²è€…åœ°å€
    â†“
åˆ†é…ï¼š
â”œâ”€ 5,000,000 JBC â†’ æµåŠ¨æ€§æ± 
â””â”€ 95,000,000 JBC â†’ åè®®åˆçº¦
    â†“
ç”¨æˆ·å‚ä¸åè®®
    â†“
è·å¾—å¥–åŠ± (50% MC + 50% JBC)
    â†“
åè®®åˆçº¦ä»ä½™é¢ä¸­è½¬è´¦ JBC ç»™ç”¨æˆ·
    â†“
(å¦‚æœä½™é¢ä¸è¶³ï¼Œåªåˆ†é… MC éƒ¨åˆ†)
```

## 6. æ•°æ®éªŒè¯å»ºè®®

### 6.1 ç›‘æ§æŒ‡æ ‡

1. **åè®®åˆçº¦ JBC ä½™é¢**
   ```javascript
   const jbcBalance = await jbcToken.balanceOf(protocolAddress);
   ```

2. **äº¤æ¢å‚¨å¤‡æ± çŠ¶æ€**
   ```javascript
   const reserveMC = await protocol.swapReserveMC();
   const reserveJBC = await protocol.swapReserveJBC();
   const jbcPrice = reserveMC / reserveJBC;
   ```

3. **æ€»ä¾›åº”é‡å˜åŒ–**
   ```javascript
   const totalSupply = await jbcToken.totalSupply();
   // åº”è¯¥ <= 100,000,000 (åˆå§‹ä¾›åº”é‡)
   ```

### 6.2 é¢„è­¦æœºåˆ¶

- å½“åè®®åˆçº¦ JBC ä½™é¢ < æ€»å¥–åŠ±éœ€æ±‚çš„ 10% æ—¶ï¼Œå‘å‡ºè­¦å‘Š
- å½“äº¤æ¢å‚¨å¤‡æ±  JBC < æœ€å°æµåŠ¨æ€§è¦æ±‚æ—¶ï¼Œæš‚åœäº¤æ¢åŠŸèƒ½
- ç›‘æ§ JBC æ€»ä¾›åº”é‡çš„å˜åŒ–ï¼ˆåº”è¯¥åªå‡å°‘ï¼Œä¸å¢åŠ ï¼‰

## 7. æ€»ç»“

**JBC ç”Ÿæˆæœºåˆ¶çš„æ ¸å¿ƒç‰¹ç‚¹ï¼š**

1. âœ… **ä¸€æ¬¡æ€§åˆå§‹é“¸é€ **ï¼šéƒ¨ç½²æ—¶é“¸é€  1 äº¿æšï¼Œä¹‹åä¸å†å¢åŠ 
2. âœ… **å›ºå®šä¾›åº”é‡**ï¼šæ€»ä¾›åº”é‡å›ºå®šï¼Œåªèƒ½é€šè¿‡é”€æ¯å‡å°‘
3. âœ… **é¢„åˆ†é…æ¨¡å¼**ï¼šåè®®åˆçº¦éœ€è¦é¢„å…ˆæŒæœ‰ JBC æ‰èƒ½åˆ†é…
4. âš ï¸ **æ— åŠ¨æ€é“¸é€ **ï¼šå½“å‰åˆçº¦ä¸æ”¯æŒæŒ‰éœ€é“¸é€ æ–°ä»£å¸
5. âœ… **50/50 åˆ†é…**ï¼šç”¨æˆ·å¥–åŠ±é‡‡ç”¨ MC å’Œ JBC å„ 50% çš„ä»·å€¼åˆ†é…
6. âœ… **ä»·æ ¼æœºåˆ¶**ï¼šåŸºäºå†…éƒ¨äº¤æ¢å‚¨å¤‡æ± è®¡ç®— JBC ä»·æ ¼

**å…³é”®é£é™©ï¼š**
- å¦‚æœåè®®åˆçº¦çš„ JBC ä½™é¢è€—å°½ï¼Œå°†æ— æ³•ç»§ç»­åˆ†é… JBC å¥–åŠ±
- éœ€è¦ç¡®ä¿åˆå§‹åˆ†é…çš„ 95,000,000 JBC è¶³å¤Ÿæ”¯æ’‘æ‰€æœ‰ç”¨æˆ·å¥–åŠ±

**å»ºè®®ï¼š**
- å®ç°å¯é“¸é€ çš„ JBCv2 åˆçº¦ï¼Œæˆ–ç¡®ä¿åè®®åˆçº¦æœ‰è¶³å¤Ÿçš„ JBC å‚¨å¤‡
- æ·»åŠ ä½™é¢ç›‘æ§å’Œé¢„è­¦æœºåˆ¶
- è€ƒè™‘å®ç°åŠ¨æ€åˆ†é…æ¯”ä¾‹ï¼ˆæ ¹æ®å¯ç”¨ä½™é¢è°ƒæ•´ MC/JBC æ¯”ä¾‹ï¼‰

## 8. å½“å‰çŠ¶æ€æ£€æŸ¥ç»“æœ

### 8.1 æ£€æŸ¥æ—¶é—´
2024å¹´ï¼ˆæœ€æ–°æ£€æŸ¥ï¼‰

### 8.2 æ£€æŸ¥ç»“æœ

**ğŸš¨ ä¸¥é‡è­¦å‘Šï¼šåè®®åˆçº¦ JBC ä½™é¢ä¸¥é‡ä¸è¶³ï¼**

| é¡¹ç›® | æ•°å€¼ |
|------|------|
| **åè®®åˆçº¦ JBC ä½™é¢** | 10,100 JBC |
| **JBC æ€»ä¾›åº”é‡** | 100,000,000 JBC |
| **åè®®æŒæœ‰æ¯”ä¾‹** | 0.01% |
| **åˆå§‹åˆ†é…** | 95,000,000 JBC |
| **å·²ä½¿ç”¨** | 94,989,900 JBC (99.99%) |
| **å‰©ä½™** | 10,100 JBC |

### 8.3 é£é™©è¯„ä¼°

**æé«˜é£é™©ï¼š**
- âš ï¸ åè®®åˆçº¦ JBC ä½™é¢ä»…å‰© 10,100 JBC
- âš ï¸ å·²ä½¿ç”¨ 99.99% çš„åˆå§‹åˆ†é…
- ğŸš¨ ä½™é¢è¿œä½äº 100 ä¸‡çš„å®‰å…¨é˜ˆå€¼
- ğŸš¨ å¯èƒ½æ— æ³•ç»§ç»­åˆ†é… JBC å¥–åŠ±ç»™ç”¨æˆ·

**å½±å“ï¼š**
1. **å¥–åŠ±åˆ†é…å¤±è´¥**ï¼šå½“ç”¨æˆ·é¢†å–å¥–åŠ±æ—¶ï¼Œå¦‚æœ JBC ä½™é¢ä¸è¶³ï¼Œå°†åªèƒ½è·å¾— MC éƒ¨åˆ†
2. **ç”¨æˆ·ä½“éªŒä¸‹é™**ï¼šç”¨æˆ·æœŸæœ›è·å¾— 50% MC + 50% JBCï¼Œä½†å¯èƒ½åªèƒ½è·å¾— MC
3. **åè®®åŠŸèƒ½å—é™**ï¼šäº¤æ¢åŠŸèƒ½å¯èƒ½å—å½±å“ï¼ˆå‚¨å¤‡æ±  JBC ä¸º 0ï¼‰

### 8.4 ç´§æ€¥å»ºè®®

#### ç«‹å³è¡ŒåŠ¨ï¼ˆé«˜ä¼˜å…ˆçº§ï¼‰
1. **è¡¥å…… JBC ä½™é¢**
   - éœ€è¦å‘åè®®åˆçº¦è½¬å…¥è‡³å°‘ 1,000,000 JBCï¼ˆå»ºè®® 5,000,000+ï¼‰
   - æ£€æŸ¥æ˜¯å¦æœ‰å…¶ä»–åœ°å€æŒæœ‰æœªåˆ†é…çš„ JBC
   - è€ƒè™‘ä»æµåŠ¨æ€§æ± æˆ–å…¶ä»–æ¥æºè¡¥å……

2. **å®ç°åŠ¨æ€åˆ†é…æœºåˆ¶**
   - ä¿®æ”¹å¥–åŠ±åˆ†é…é€»è¾‘ï¼Œå½“ JBC ä½™é¢ä¸è¶³æ—¶ï¼š
     - ä¼˜å…ˆåˆ†é… MC
     - æˆ–æ ¹æ®å¯ç”¨ä½™é¢åŠ¨æ€è°ƒæ•´ MC/JBC æ¯”ä¾‹
     - æˆ–æš‚åœ JBC åˆ†é…ï¼Œåªåˆ†é… MC

3. **å®ç° JBCv2 å¯é“¸é€ åˆçº¦**
   - åˆ›å»ºæ”¯æŒåè®®åˆçº¦é“¸é€ çš„ JBCv2
   - è¿ç§»ç°æœ‰ JBC åˆ° JBCv2
   - å…è®¸åè®®åˆçº¦æŒ‰éœ€é“¸é€ ï¼ˆéœ€è®¾ç½®åˆç†ä¸Šé™ï¼‰

#### ä¸­æœŸæ–¹æ¡ˆ
1. **ç›‘æ§ç³»ç»Ÿ**
   - å®ç°è‡ªåŠ¨ä½™é¢ç›‘æ§
   - è®¾ç½®é¢„è­¦é˜ˆå€¼ï¼ˆå¦‚ä½™é¢ < 100 ä¸‡æ—¶å‘Šè­¦ï¼‰
   - å®šæœŸæ£€æŸ¥å¹¶æŠ¥å‘Šä½™é¢çŠ¶æ€

2. **ä¼˜åŒ–åˆ†é…ç­–ç•¥**
   - æ ¹æ®åè®®æ”¶å…¥åŠ¨æ€è°ƒæ•´åˆ†é…æ¯”ä¾‹
   - å®ç°å‚¨å¤‡æ± è‡ªåŠ¨è¡¥å……æœºåˆ¶
   - è€ƒè™‘ä»äº¤æ˜“ç¨æ”¶ä¸­è¡¥å…… JBC å‚¨å¤‡

### 8.5 æ£€æŸ¥è„šæœ¬

å·²åˆ›å»ºæ£€æŸ¥è„šæœ¬ï¼š`scripts/check-protocol-jbc-balance.cjs`

**ä½¿ç”¨æ–¹æ³•ï¼š**
```bash
node scripts/check-protocol-jbc-balance.cjs
```

**è„šæœ¬åŠŸèƒ½ï¼š**
- âœ… æŸ¥è¯¢åè®®åˆçº¦ JBC ä½™é¢
- âœ… æŸ¥è¯¢ JBC æ€»ä¾›åº”é‡
- âœ… æŸ¥è¯¢äº¤æ¢å‚¨å¤‡æ± çŠ¶æ€
- âœ… è®¡ç®—ä½¿ç”¨ç‡å’Œå‰©ä½™é‡
- âœ… è‡ªåŠ¨é¢„è­¦å’Œé£é™©è¯„ä¼°

**å»ºè®®å®šæœŸè¿è¡Œï¼š**
- æ¯å¤©æ£€æŸ¥ä¸€æ¬¡
- æˆ–é›†æˆåˆ°ç›‘æ§ç³»ç»Ÿä¸­

