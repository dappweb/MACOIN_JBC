# 🏆 Jinbao Protocol 四种奖励模型详细分析

## 📊 奖励系统概览

Jinbao Protocol 实现了四种核心奖励机制，通过智能合约自动分发，为用户提供多层次的收益来源。

### 🎯 奖励类型定义
| 奖励ID | 奖励名称 | 合约常量 | Test环境 | P-Prod环境 |
|--------|---------|----------|---------|-----------|
| **0** | 静态奖励 | `REWARD_STATIC` | ✅ 相同 | ✅ 相同 |
| **1** | 动态奖励 | `REWARD_DYNAMIC` | ✅ 相同 | ✅ 相同 |
| **2** | 直推奖励 | `REWARD_DIRECT` | ✅ 相同 | ✅ 相同 |
| **3** | 层级奖励 | `REWARD_LEVEL` | ✅ 相同 | ✅ 相同 |
| **4** | 级差奖励 | `REWARD_DIFFERENTIAL` | ✅ 相同 | ✅ 相同 |

---

## 🏆 奖励模型一：静态奖励 (REWARD_STATIC)

### 💎 基本机制
静态奖励是用户通过质押流动性获得的固定收益，采用**50% MC + 50% JBC**的双币分配模式。

### ⏰ 收益计算

#### 🧪 Test环境 (测试加速)
| 质押周期 | 时间单位 | 实际时长 | 日收益率 | 计算公式 |
|---------|---------|----------|---------|----------|
| **7天** | 60秒 | 7分钟 | 1.33% | `13333334 / 1e9` |
| **15天** | 60秒 | 15分钟 | 1.67% | `16666667 / 1e9` |
| **30天** | 60秒 | 30分钟 | 2.00% | `20000000 / 1e9` |

#### 🏭 P-Prod环境 (生产标准)
| 质押周期 | 时间单位 | 实际时长 | 日收益率 | 计算公式 |
|---------|---------|----------|---------|----------|
| **7天** | 86400秒 | 7天 | 1.33% | `13333334 / 1e9` |
| **15天** | 86400秒 | 15天 | 1.67% | `16666667 / 1e9` |
| **30天** | 86400秒 | 30天 | 2.00% | `20000000 / 1e9` |

### 💰 收益分配机制
```solidity
// 50% MC + 50% JBC 分配
uint256 mcPart = totalPending / 2;
uint256 jbcValuePart = totalPending / 2;

// JBC数量根据当前汇率计算
uint256 jbcPrice = (swapReserveMC * 1e18) / swapReserveJBC;
uint256 jbcAmount = (jbcValuePart * 1e18) / jbcPrice;
```

### 📊 收益上限
- **收益上限**: 门票价格的3倍
- **达到上限**: 自动触发退出机制
- **收益累计**: 实时更新用户总收益

---

## 🏆 奖励模型二：直推奖励 (REWARD_DIRECT)

### 💎 基本机制
直推奖励是推荐人在被推荐人购买门票时获得的即时奖励，占门票价格的**25%**。

### 🎯 触发条件
| 条件 | Test环境 | P-Prod环境 | 说明 |
|------|---------|-----------|------|
| **推荐关系** | ✅ 必须 | ✅ 必须 | 被推荐人已绑定推荐人 |
| **推荐人活跃** | ✅ 必须 | ✅ 必须 | 推荐人必须有有效门票 |
| **门票购买** | ✅ 触发 | ✅ 触发 | 被推荐人购买任意门票 |

### 💰 奖励计算
```solidity
// 直推奖励 = 门票金额 × 25%
uint256 directAmt = (amount * directRewardPercent) / 100;
// directRewardPercent = 25

// 示例计算
100 MC门票 → 25 MC直推奖励
300 MC门票 → 75 MC直推奖励
500 MC门票 → 125 MC直推奖励
1000 MC门票 → 250 MC直推奖励
```

### 🔄 分配方式
- **分配币种**: 纯MC代币
- **即时到账**: 购买门票时立即分发
- **收益上限**: 受推荐人3倍门票收益上限约束

### 📈 收益示例
| 门票等级 | 门票价格 | 直推奖励 | Test环境 | P-Prod环境 |
|---------|---------|----------|---------|-----------|
| **基础** | 100 MC | 25 MC | ✅ 相同 | ✅ 相同 |
| **银牌** | 300 MC | 75 MC | ✅ 相同 | ✅ 相同 |
| **金牌** | 500 MC | 125 MC | ✅ 相同 | ✅ 相同 |
| **钻石** | 1000 MC | 250 MC | ✅ 相同 | ✅ 相同 |

---

## 🏆 奖励模型三：层级奖励 (REWARD_LEVEL)

### 💎 基本机制
层级奖励是多层级的推荐奖励系统，根据推荐人的活跃直推数量决定可获得的奖励层数。

### 📊 层级配置
| 活跃直推数 | 奖励层数 | 每层奖励 | Test环境 | P-Prod环境 |
|-----------|---------|----------|---------|-----------|
| **≥1人** | 5层 | 1% | ✅ 相同 | ✅ 相同 |
| **≥2人** | 10层 | 1% | ✅ 相同 | ✅ 相同 |
| **≥3人** | 15层 | 1% | ✅ 相同 | ✅ 相同 |

### 💰 奖励计算
```solidity
// 总层级奖励池 = 门票金额 × 15%
uint256 totalLevelRewardAmount = (amount * levelRewardPercent) / 100;
// levelRewardPercent = 15

// 每层奖励 = 门票金额 × 1%
uint256 rewardPerLayer = (amount * 1) / 100;
```

### 🔄 分配逻辑
1. **向上遍历**: 从购买者的推荐人开始向上遍历
2. **活跃检查**: 只有活跃用户才能获得奖励
3. **层数限制**: 根据活跃直推数确定可获得层数
4. **剩余处理**: 未分发完的奖励进入层级奖励池

### 📈 收益示例 (100 MC门票)
| 推荐层级 | 推荐人活跃直推 | 可获得奖励 | 奖励金额 |
|---------|-------------|-----------|----------|
| **1层** | ≥1人 | ✅ | 1 MC |
| **2层** | ≥1人 | ✅ | 1 MC |
| **3层** | ≥1人 | ✅ | 1 MC |
| **4层** | ≥1人 | ✅ | 1 MC |
| **5层** | ≥1人 | ✅ | 1 MC |
| **6层** | ≥2人 | ✅ | 1 MC |
| **7层** | ≥2人 | ✅ | 1 MC |
| **8层** | ≥2人 | ✅ | 1 MC |
| **9层** | ≥2人 | ✅ | 1 MC |
| **10层** | ≥2人 | ✅ | 1 MC |
| **11层** | ≥3人 | ✅ | 1 MC |
| **12层** | ≥3人 | ✅ | 1 MC |
| **13层** | ≥3人 | ✅ | 1 MC |
| **14层** | ≥3人 | ✅ | 1 MC |
| **15层** | ≥3人 | ✅ | 1 MC |

---

## 🏆 奖励模型四：级差奖励 (REWARD_DIFFERENTIAL)

### 💎 基本机制
级差奖励是基于团队建设的高级奖励系统，采用**V0-V9等级制度**和**50% MC + 50% JBC**分配模式。

### 🏅 等级体系
| 等级 | 团队要求 | 级差收益率 | Test环境 | P-Prod环境 |
|------|---------|-----------|---------|-----------|
| **V0** | <10人 | 0% | ✅ 相同 | ✅ 相同 |
| **V1** | ≥10人 | 5% | ✅ 相同 | ✅ 相同 |
| **V2** | ≥30人 | 10% | ✅ 相同 | ✅ 相同 |
| **V3** | ≥100人 | 15% | ✅ 相同 | ✅ 相同 |
| **V4** | ≥300人 | 20% | ✅ 相同 | ✅ 相同 |
| **V5** | ≥1,000人 | 25% | ✅ 相同 | ✅ 相同 |
| **V6** | ≥3,000人 | 30% | ✅ 相同 | ✅ 相同 |
| **V7** | ≥10,000人 | 35% | ✅ 相同 | ✅ 相同 |
| **V8** | ≥30,000人 | 40% | ✅ 相同 | ✅ 相同 |
| **V9** | ≥100,000人 | 45% | ✅ 相同 | ✅ 相同 |

### 🎯 触发机制
- **触发时机**: 用户质押流动性时
- **计算基础**: 质押金额
- **分发时机**: 质押周期结束时

### 💰 奖励计算
```solidity
// 级差奖励计算
function _getLevel(uint256 teamCount) returns (uint256 level, uint256 percent) {
    if (teamCount >= 100000) return (9, 45);  // V9
    if (teamCount >= 30000) return (8, 40);   // V8
    if (teamCount >= 10000) return (7, 35);   // V7
    if (teamCount >= 3000) return (6, 30);    // V6
    if (teamCount >= 1000) return (5, 25);    // V5
    if (teamCount >= 300) return (4, 20);     // V4
    if (teamCount >= 100) return (3, 15);     // V3
    if (teamCount >= 30) return (2, 10);      // V2
    if (teamCount >= 10) return (1, 5);       // V1
    return (0, 0);                            // V0
}
```

### 🔄 分配机制 (50% MC + 50% JBC)
```solidity
// 50/50 分配
uint256 mcPart = amount / 2;
uint256 jbcValuePart = amount / 2;

// JBC数量根据当前汇率计算
uint256 jbcPrice = _getCurrentJBCPrice();
uint256 jbcAmount = (jbcValuePart * 1 ether) / jbcPrice;
```

### 📈 收益示例 (1500 MC质押)
| 用户等级 | 团队规模 | 级差收益率 | MC奖励 | JBC奖励 | 总价值 |
|---------|---------|-----------|--------|---------|--------|
| **V1** | 10人 | 5% | 37.5 MC | 37.5 MC等值JBC | 75 MC |
| **V3** | 100人 | 15% | 112.5 MC | 112.5 MC等值JBC | 225 MC |
| **V5** | 1000人 | 25% | 187.5 MC | 187.5 MC等值JBC | 375 MC |
| **V7** | 10000人 | 35% | 262.5 MC | 262.5 MC等值JBC | 525 MC |
| **V9** | 100000人 | 45% | 337.5 MC | 337.5 MC等值JBC | 675 MC |

---

## 🔄 环境差异对比

### ⏰ 时间参数差异
| 参数 | Test环境 | P-Prod环境 | 影响 |
|------|---------|-----------|------|
| **时间单位** | 60秒 | 86400秒 | 静态奖励发放速度 |
| **质押周期** | 分钟级 | 天级 | 级差奖励触发时间 |

### 💰 奖励参数 (完全相同)
| 奖励类型 | 比例/机制 | Test环境 | P-Prod环境 |
|---------|----------|---------|-----------|
| **静态奖励** | 50% MC + 50% JBC | ✅ 相同 | ✅ 相同 |
| **直推奖励** | 25% 纯MC | ✅ 相同 | ✅ 相同 |
| **层级奖励** | 15% 纯MC | ✅ 相同 | ✅ 相同 |
| **级差奖励** | 50% MC + 50% JBC | ✅ 相同 | ✅ 相同 |

### 🏅 等级系统 (完全相同)
- V0-V9等级要求完全一致
- 级差收益率完全一致
- 团队统计算法完全一致

---

## 📊 奖励分发流程

### 🎫 门票购买触发
1. **直推奖励**: 立即分发给推荐人 (25% MC)
2. **层级奖励**: 立即分发给上级推荐链 (15% MC)
3. **其他费用**: 营销5% + 回购5% + LP25% + 国库25%

### 💧 质押流动性触发
1. **级差奖励**: 计算并存储待发放奖励
2. **静态奖励**: 开始按日计算收益

### ⏰ 质押到期触发
1. **静态奖励**: 发放累计收益 (50% MC + 50% JBC)
2. **级差奖励**: 发放存储的奖励 (50% MC + 50% JBC)

---

## 🎯 奖励优化策略

### 💎 用户策略
1. **新手策略**: 专注直推奖励，快速回本
2. **成长策略**: 建设团队，获得层级奖励
3. **高级策略**: 扩大团队规模，冲击V等级
4. **复合策略**: 质押+推荐+团队建设组合

### 🏆 收益最大化
1. **多层收益**: 同时获得四种奖励
2. **复利效应**: 奖励再投资质押
3. **团队效应**: 团队越大，级差收益越高
4. **长期持有**: 避免高额交易税费

---

## 🔒 风险控制机制

### 💰 收益上限
- **个人上限**: 门票价格3倍
- **达到上限**: 自动退出机制
- **防止无限**: 控制系统风险

### ⚖️ 平衡机制
- **双币分配**: 平衡MC和JBC供需
- **税费机制**: 50%买入税 + 25%卖出税
- **销毁机制**: 减少JBC流通量

---

**📅 分析日期**: 2025年12月30日  
**🔍 数据来源**: 智能合约源码分析  
**📊 覆盖范围**: Test环境 + P-Prod环境完整对比  
**🎯 重点**: 四种奖励机制的详细实现和环境差异