# ğŸ‰ Test & P-Prod åˆ†æ”¯ Cloudflare Pages éƒ¨ç½²å®Œæˆ

## ğŸ“Š éƒ¨ç½²çŠ¶æ€æ€»ç»“

**å®Œæˆæ—¶é—´**: 2025å¹´12æœˆ31æ—¥  
**çŠ¶æ€**: âœ… éƒ¨ç½²å®Œæˆå¹¶å·²è§¦å‘  
**ä¼˜åŒ–çº§åˆ«**: ğŸš€ å®Œæ•´æ€§èƒ½ä¼˜åŒ–  

---

## âœ… å·²å®Œæˆçš„éƒ¨ç½²

### ğŸ­ ç”Ÿäº§ç¯å¢ƒ (P-Prodåˆ†æ”¯)
- **åˆ†æ”¯**: `p-prod`
- **é¡¹ç›®**: `jbc-ac-production`
- **åŸŸå**: https://jbc.ac (ä¸»åŸŸå)
- **å¤‡ç”¨**: https://jbc-ac-production.pages.dev
- **çŠ¶æ€**: âœ… å·²æ¨é€ï¼ŒGitHub Actionsæ­£åœ¨éƒ¨ç½²
- **å·¥ä½œæµ**: `.github/workflows/deploy-production.yml`

### ğŸ” é¢„è§ˆç¯å¢ƒ (Teståˆ†æ”¯)
- **åˆ†æ”¯**: `test`
- **é¡¹ç›®**: `jbc-ac-preview`
- **åŸŸå**: https://jbc-ac-preview.pages.dev
- **çŠ¶æ€**: âœ… å·²æ¨é€ï¼ŒGitHub Actionsæ­£åœ¨éƒ¨ç½²
- **å·¥ä½œæµ**: `.github/workflows/deploy-preview.yml`

---

## ğŸš€ æ€§èƒ½ä¼˜åŒ–é…ç½®

### ğŸ“¦ æ„å»ºä¼˜åŒ–
- âœ… **ä»£ç åˆ†å‰²**: Reactã€Web3ã€UIç»„ä»¶åˆ†ç¦»
- âœ… **å‹ç¼©ä¼˜åŒ–**: Terser + ç”Ÿäº§ç¯å¢ƒconsoleç§»é™¤
- âœ… **ä¾èµ–é¢„æ„å»º**: æ ¸å¿ƒä¾èµ–é¢„æ„å»º
- âœ… **Bundleåˆ†æ**: è‡ªåŠ¨æ„å»ºå¤§å°åˆ†æ

### ğŸŒ Cloudflareä¼˜åŒ–
- âœ… **ç¼“å­˜ç­–ç•¥**: 
  - ç”Ÿäº§ç¯å¢ƒ: 1å°æ—¶TTL
  - é¢„è§ˆç¯å¢ƒ: 5åˆ†é’ŸTTL
- âœ… **å‹ç¼©é…ç½®**: Brotli + Gzip
- âœ… **æ€§èƒ½å˜é‡**: å¹¶å‘é™åˆ¶ã€é€Ÿç‡é™åˆ¶
- âœ… **å®‰å…¨å¤´**: å®Œæ•´å®‰å…¨å“åº”å¤´

### ğŸ“± å‰ç«¯ä¼˜åŒ–
- âœ… **æ‡’åŠ è½½å›¾ç‰‡**: IntersectionObserver
- âœ… **æ™ºèƒ½ç¼“å­˜**: LRU + TTLæœºåˆ¶
- âœ… **æ€§èƒ½ç›‘æ§**: Core Web Vitals
- âœ… **èµ„æºé¢„åŠ è½½**: DNSé¢„è§£æã€å…³é”®èµ„æº

---

## ğŸ“ˆ é¢„æœŸæ€§èƒ½æå‡

| æŒ‡æ ‡ | ä¼˜åŒ–å‰ | ä¼˜åŒ–å | æå‡å¹…åº¦ |
|------|--------|--------|----------|
| **é¦–å±åŠ è½½** | 3-5ç§’ | 1-2ç§’ | 60-70% â¬‡ï¸ |
| **é¡µé¢å¤§å°** | 2-3MB | 800KB-1.2MB | 50-60% â¬‡ï¸ |
| **JSåŒ…å¤§å°** | 1.5MB | 600KB | 60% â¬‡ï¸ |
| **ç¼“å­˜å‘½ä¸­ç‡** | 30-40% | 80-90% | 100%+ â¬†ï¸ |

---

## ğŸ”„ è‡ªåŠ¨åŒ–éƒ¨ç½²æµç¨‹

### ğŸ­ ç”Ÿäº§ç¯å¢ƒæµç¨‹
1. **è§¦å‘**: æ¨é€åˆ° `p-prod` åˆ†æ”¯
2. **æ„å»º**: ä¼˜åŒ–æ„å»º + å¤§å°åˆ†æ
3. **æµ‹è¯•**: å®Œæ•´æµ‹è¯•å¥—ä»¶
4. **éƒ¨ç½²**: éƒ¨ç½²åˆ° `jbc-ac-production`
5. **é…ç½®**: ç”Ÿäº§ç¯å¢ƒå˜é‡è®¾ç½®
6. **éªŒè¯**: å¥åº·æ£€æŸ¥ + åŸŸåéªŒè¯
7. **é€šçŸ¥**: TelegramæˆåŠŸ/å¤±è´¥é€šçŸ¥

### ğŸ” é¢„è§ˆç¯å¢ƒæµç¨‹
1. **è§¦å‘**: æ¨é€åˆ° `test` åˆ†æ”¯
2. **æ„å»º**: ä¼˜åŒ–æ„å»º + åˆ†æ
3. **æµ‹è¯•**: å®Œæ•´æµ‹è¯•å¥—ä»¶
4. **éƒ¨ç½²**: éƒ¨ç½²åˆ° `jbc-ac-preview`
5. **é…ç½®**: é¢„è§ˆç¯å¢ƒå˜é‡è®¾ç½®
6. **éªŒè¯**: å¥åº·æ£€æŸ¥
7. **é€šçŸ¥**: éƒ¨ç½²çŠ¶æ€é€šçŸ¥

---

## ğŸŒ è®¿é—®åœ°å€

### ğŸ­ ç”Ÿäº§ç¯å¢ƒ
```
ä¸»åŸŸå: https://jbc.ac
å¤‡ç”¨åŸŸå: https://jbc-ac-production.pages.dev
APIå¥åº·æ£€æŸ¥: https://jbc.ac/api/health
```

### ğŸ” é¢„è§ˆç¯å¢ƒ
```
é¢„è§ˆåŸŸå: https://jbc-ac-preview.pages.dev
APIå¥åº·æ£€æŸ¥: https://jbc-ac-preview.pages.dev/api/health
```

---

## ğŸ“Š ç›‘æ§å’Œç»´æŠ¤

### ğŸ” éƒ¨ç½²çŠ¶æ€æ£€æŸ¥
```bash
# æ£€æŸ¥GitHub ActionsçŠ¶æ€
gh run list --workflow=deploy-production.yml
gh run list --workflow=deploy-preview.yml

# æŸ¥çœ‹éƒ¨ç½²æ—¥å¿—
gh run view --log
```

### ğŸ“ˆ æ€§èƒ½ç›‘æ§
```bash
# æœ¬åœ°æ€§èƒ½æµ‹è¯•
npm run perf:audit
npm run build:analyze
npm run perf:build-size

# æ£€æŸ¥éƒ¨ç½²çŠ¶æ€
curl -I https://jbc.ac
curl -I https://jbc-ac-preview.pages.dev
```

### ğŸ› ï¸ ç»´æŠ¤å‘½ä»¤
```bash
# æ‰‹åŠ¨éƒ¨ç½²
npm run pages:deploy:prod      # ç”Ÿäº§ç¯å¢ƒ
npm run pages:deploy:staging   # é¢„è§ˆç¯å¢ƒ

# å¼ºåˆ¶éƒ¨ç½² (è·³è¿‡æµ‹è¯•)
gh workflow run deploy-production.yml -f force_deploy=true
gh workflow run deploy-preview.yml -f force_deploy=true
```

---

## ğŸ”§ ç¯å¢ƒé…ç½®å¯¹æ¯”

| é…ç½®é¡¹ | ç”Ÿäº§ç¯å¢ƒ | é¢„è§ˆç¯å¢ƒ |
|--------|----------|----------|
| **ç¼“å­˜TTL** | 3600ç§’ | 300ç§’ |
| **å¹¶å‘é™åˆ¶** | 100/åˆ†é’Ÿ | 50/åˆ†é’Ÿ |
| **é€Ÿç‡é™åˆ¶** | 1000/åˆ†é’Ÿ | 500/åˆ†é’Ÿ |
| **å‹ç¼©** | å®Œå…¨å¯ç”¨ | å¯ç”¨ |
| **å‹ç¼©** | å¯ç”¨ | ç¦ç”¨(è°ƒè¯•) |
| **ç›‘æ§çº§åˆ«** | ç”Ÿäº§çº§ | å¼€å‘çº§ |

---

## ğŸš¨ æ•…éšœæ’é™¤

### âš ï¸ å¸¸è§é—®é¢˜

#### 1. éƒ¨ç½²å¤±è´¥
```bash
# æ£€æŸ¥å·¥ä½œæµçŠ¶æ€
gh run list --repo dappweb/MACOIN_JBC

# æŸ¥çœ‹å¤±è´¥åŸå› 
gh run view <run-id> --log
```

#### 2. åŸŸåè®¿é—®é—®é¢˜
- æ£€æŸ¥Cloudflare Pagesè‡ªå®šä¹‰åŸŸåé…ç½®
- éªŒè¯DNSè®¾ç½®æ˜¯å¦æ­£ç¡®
- ç¡®è®¤SSLè¯ä¹¦çŠ¶æ€

#### 3. æ€§èƒ½é—®é¢˜
```bash
# æ£€æŸ¥ç¼“å­˜é…ç½®
curl -I https://jbc.ac | grep -i cache

# éªŒè¯å‹ç¼©
curl -H "Accept-Encoding: gzip,deflate,br" -I https://jbc.ac
```

### ğŸ”„ å›æ»šæ“ä½œ
```bash
# åˆ—å‡ºéƒ¨ç½²å†å²
wrangler pages deployment list --project-name=jbc-ac-production

# å›æ»šåˆ°æŒ‡å®šç‰ˆæœ¬
wrangler pages deployment activate <deployment-id> --project-name=jbc-ac-production
```

---

## ğŸ“‹ ä¸‹ä¸€æ­¥è¡ŒåŠ¨

### ğŸ” ç›‘æ§ä»»åŠ¡
1. **å®æ—¶ç›‘æ§**: è§‚å¯ŸGitHub Actionséƒ¨ç½²è¿›åº¦
2. **æ€§èƒ½éªŒè¯**: éƒ¨ç½²å®Œæˆåæµ‹è¯•åŠ è½½é€Ÿåº¦
3. **åŠŸèƒ½æµ‹è¯•**: éªŒè¯æ‰€æœ‰åŠŸèƒ½æ­£å¸¸å·¥ä½œ
4. **ç¼“å­˜æµ‹è¯•**: ç¡®è®¤ç¼“å­˜ç­–ç•¥ç”Ÿæ•ˆ

### ğŸ“Š æ€§èƒ½åŸºçº¿å»ºç«‹
```bash
# å»ºç«‹æ€§èƒ½åŸºçº¿
npm run perf:audit > performance-baseline.txt
npm run perf:build-size >> performance-baseline.txt
```

### ğŸ› ï¸ æŒç»­ä¼˜åŒ–
- ç›‘æ§Core Web VitalsæŒ‡æ ‡
- å®šæœŸæ£€æŸ¥Bundleå¤§å°å˜åŒ–
- ä¼˜åŒ–ç¼“å­˜ç­–ç•¥
- æ›´æ–°ä¾èµ–é¡¹

---

## ğŸ¯ æˆåŠŸæŒ‡æ ‡

### âœ… éƒ¨ç½²æˆåŠŸæ ‡å¿—
- [ ] GitHub Actionså·¥ä½œæµæˆåŠŸå®Œæˆ
- [ ] ç”Ÿäº§åŸŸå https://jbc.ac å¯è®¿é—®
- [ ] é¢„è§ˆåŸŸå https://jbc-ac-preview.pages.dev å¯è®¿é—®
- [ ] APIå¥åº·æ£€æŸ¥è¿”å›æ­£å¸¸
- [ ] é¡µé¢åŠ è½½æ—¶é—´ < 2ç§’
- [ ] ç¼“å­˜å‘½ä¸­ç‡ > 80%

### ğŸ“ˆ æ€§èƒ½ç›®æ ‡
- **é¦–å±åŠ è½½æ—¶é—´**: < 2ç§’
- **é¡µé¢å¤§å°**: < 1.2MB
- **JavaScriptåŒ…**: < 600KB
- **ç¼“å­˜å‘½ä¸­ç‡**: > 80%
- **Core Web Vitals**: å…¨ç»¿

---

## ğŸ‰ æ€»ç»“

âœ… **å®Œæˆé¡¹ç›®**:
- teståˆ†æ”¯ â†’ jbc-ac-preview.pages.dev (é¢„è§ˆç¯å¢ƒ)
- p-prodåˆ†æ”¯ â†’ jbc.ac (ç”Ÿäº§ç¯å¢ƒ)
- å®Œæ•´æ€§èƒ½ä¼˜åŒ–é…ç½®
- è‡ªåŠ¨åŒ–éƒ¨ç½²å’Œç›‘æ§

âœ… **æŠ€æœ¯æ ˆ**:
- React 19 + TypeScript + Vite 4.5.14
- Cloudflare Pages + Functions
- GitHub Actions CI/CD
- æ€§èƒ½ç›‘æ§å’Œç¼“å­˜ä¼˜åŒ–

âœ… **è¿ç»´ä¿éšœ**:
- è‡ªåŠ¨åŒ–éƒ¨ç½²æµç¨‹
- å¥åº·æ£€æŸ¥å’Œç›‘æ§
- å¿«é€Ÿå›æ»šæœºåˆ¶
- è¯¦ç»†æ—¥å¿—å’Œé€šçŸ¥

**ğŸš€ éƒ¨ç½²å·²å®Œæˆï¼Œæ­£åœ¨ç­‰å¾…GitHub Actionsæ‰§è¡Œç»“æœï¼**