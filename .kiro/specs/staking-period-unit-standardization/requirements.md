# 流动性质押周期单位标准化规格

## 介绍

本规格旨在解决Jinbao Protocol中流动性质押周期单位显示错误的紧急问题。当前生产环境中系统错误地显示"7分钟"、"15分钟"、"30分钟"的质押周期，但实际应该显示"7天"、"15天"、"30天"。这个显示错误会严重误导用户，让他们以为只需要质押几分钟而不是几天，造成用户体验问题和信任危机。

## 术语表

- **质押周期 (Staking_Period)**: 用户锁定流动性的时间长度，应为7天、15天、30天
- **时间单位 (Time_Unit)**: 显示质押周期的计量单位，生产环境必须使用天
- **显示错误 (Display_Error)**: 当前生产环境错误显示分钟而非天的问题
- **生产环境 (Production_Environment)**: 当前面向真实用户的环境，必须显示正确的天数周期
- **前端显示 (Frontend_Display)**: 用户界面中显示的时间单位和标签，需要紧急修复
- **智能合约 (Smart_Contract)**: 区块链上执行质押逻辑的合约代码，内部使用秒计算

## 需求

### 需求 1: 紧急修复时间单位显示

**用户故事**: 作为协议用户，我希望看到正确的质押周期显示（天而不是分钟），这样我就能准确理解我的资金实际锁定时间，避免产生误解。

#### 验收标准

1. WHEN 用户在生产环境查看质押选项 THEN 系统 SHALL 显示"7天"、"15天"、"30天"而不是"7分钟"、"15分钟"、"30分钟"
2. WHEN 用户选择质押周期 THEN 系统 SHALL 在界面上清晰显示实际的天数锁定期
3. WHEN 系统显示剩余质押时间 THEN 系统 SHALL 使用天、小时、分钟的正确格式显示倒计时
4. WHEN 用户查看历史质押记录 THEN 系统 SHALL 显示正确的天数周期格式
5. WHEN 系统在不同语言环境下运行 THEN 系统 SHALL 正确显示本地化的天数单位

### 需求 2: 配置文件修复

**用户故事**: 作为系统管理员，我希望所有配置文件都正确设置为天数单位，这样系统就能在所有组件中一致地显示正确的时间单位。

#### 验收标准

1. WHEN 系统读取环境配置 THEN 系统 SHALL 使用天作为基础时间单位而不是分钟
2. WHEN 前端组件渲染质押选项 THEN 系统 SHALL 从配置中获取正确的天数标签
3. WHEN 系统启动时 THEN 系统 SHALL 验证所有时间单位配置的一致性
4. WHEN 配置更新时 THEN 系统 SHALL 确保新配置使用正确的天数格式
5. WHEN 部署系统时 THEN 系统 SHALL 自动应用生产环境的天数配置

### 需求 3: 用户界面一致性

**用户故事**: 作为前端开发者，我希望所有质押相关的UI组件都使用统一的时间显示逻辑，这样用户就不会看到混乱的时间格式。

#### 验收标准

1. WHEN 质押面板显示周期选项 THEN 系统 SHALL 使用统一的时间单位格式
2. WHEN 倒计时组件显示剩余时间 THEN 系统 SHALL 与质押周期使用相同的时间基准
3. WHEN 收益详情显示质押信息 THEN 系统 SHALL 保持时间单位的一致性
4. WHEN 用户查看质押历史 THEN 系统 SHALL 使用标准化的时间显示格式
5. WHEN 系统显示质押状态 THEN 系统 SHALL 确保所有时间相关信息使用相同的单位

### 需求 4: 智能合约兼容性

**用户故事**: 作为区块链开发者，我希望智能合约的时间逻辑与前端显示保持一致，这样就不会出现前后端时间计算不匹配的问题。

#### 验收标准

1. WHEN 智能合约处理质押周期 THEN 系统 SHALL 使用秒作为内部计算单位但支持天数转换
2. WHEN 前端调用合约函数 THEN 系统 SHALL 正确转换显示单位到合约期望的秒数
3. WHEN 合约返回时间信息 THEN 系统 SHALL 正确转换秒数到用户友好的显示单位
4. WHEN 系统验证质押周期 THEN 系统 SHALL 确保前端和合约使用相同的时间计算逻辑
5. WHEN 处理跨环境部署 THEN 系统 SHALL 保持合约时间逻辑的一致性

### 需求 5: 数据迁移和向后兼容

**用户故事**: 作为系统维护者，我希望现有的质押数据在时间单位标准化后仍然正确显示，这样用户就不会丢失历史信息。

#### 验收标准

1. WHEN 系统升级时间单位显示 THEN 系统 SHALL 保持现有质押数据的正确性
2. WHEN 处理历史质押记录 THEN 系统 SHALL 正确解释和显示旧的时间格式
3. WHEN 用户查看升级前的质押 THEN 系统 SHALL 使用新的时间单位格式显示
4. WHEN 系统处理混合时间格式 THEN 系统 SHALL 提供清晰的转换和显示逻辑
5. WHEN 验证数据完整性 THEN 系统 SHALL 确保所有时间相关数据在转换后保持准确

### 需求 6: 错误处理和用户反馈

**用户故事**: 作为协议用户，我希望当时间单位配置出现问题时能收到清晰的错误信息，这样我就能理解问题并采取适当行动。

#### 验收标准

1. WHEN 时间单位配置不一致 THEN 系统 SHALL 显示清晰的错误信息
2. WHEN 用户输入无效的质押周期 THEN 系统 SHALL 提供有用的错误提示
3. WHEN 系统检测到时间单位冲突 THEN 系统 SHALL 记录详细的错误日志
4. WHEN 前端无法解析时间格式 THEN 系统 SHALL 提供降级显示方案
5. WHEN 用户遇到时间显示问题 THEN 系统 SHALL 提供故障排除指导

### 需求 7: 性能和缓存优化

**用户故事**: 作为系统用户，我希望时间单位的转换和显示不会影响应用性能，这样我就能获得流畅的用户体验。

#### 验收标准

1. WHEN 系统转换时间单位 THEN 系统 SHALL 在100毫秒内完成转换
2. WHEN 缓存时间格式配置 THEN 系统 SHALL 避免重复的配置读取
3. WHEN 批量处理时间显示 THEN 系统 SHALL 使用高效的批处理逻辑
4. WHEN 用户频繁查看质押信息 THEN 系统 SHALL 缓存格式化的时间字符串
5. WHEN 系统负载较高时 THEN 时间单位处理 SHALL 不影响核心功能性能

### 需求 8: 国际化支持

**用户故事**: 作为国际用户，我希望看到符合我所在地区习惯的时间单位显示，这样我就能更好地理解质押周期。

#### 验收标准

1. WHEN 用户选择中文界面 THEN 系统 SHALL 显示"天"、"小时"、"分钟"等中文时间单位
2. WHEN 用户选择英文界面 THEN 系统 SHALL 显示"days"、"hours"、"minutes"等英文时间单位
3. WHEN 系统支持新语言 THEN 系统 SHALL 提供对应的时间单位翻译
4. WHEN 用户切换语言 THEN 系统 SHALL 实时更新所有时间单位显示
5. WHEN 处理复数形式 THEN 系统 SHALL 根据语言规则正确显示单复数时间单位